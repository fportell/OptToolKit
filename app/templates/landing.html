{% extends "base.html" %}

{% block title %}Tools - OpsToolKit{% endblock %}

{% block content %}
<!-- Performance Warning Banner (T053) -->
{% if show_warning %}
<div class="performance-warning" role="alert">
    <i class="bi bi-exclamation-triangle-fill"></i>
    <strong>Performance Notice:</strong>
    The system is currently at maximum capacity ({{ concurrent_user_count }} concurrent users).
    You may experience slower response times. Please save your work frequently.
</div>
{% endif %}

<!-- Page Header (T048) -->
<div class="row mb-4">
    <div class="col-12">
        <div class="d-flex justify-content-between align-items-center">
            <div>
                <h1 class="display-5 fw-bold mb-2">
                    <i class="bi bi-tools text-primary"></i>
                    Operational Tools Platform
                </h1>
                <p class="lead text-muted mb-0">
                    Select a tool to begin working. All tools are AI-powered and integrated.
                </p>
            </div>
            <div class="text-end">
                <span class="badge bg-secondary fs-6">
                    <i class="bi bi-people"></i>
                    {{ concurrent_user_count }} active user{{ 's' if concurrent_user_count != 1 else '' }}
                </span>
            </div>
        </div>
    </div>
</div>

<!-- Tools Grid (T049-T052) -->
<div class="row g-4">
    {% for tool in tools %}
    <div class="col-12 col-md-6 col-lg-4">
        <div class="card tool-card h-100 border-{{ tool.color }}">
            <!-- Card Header with Icon (T050) -->
            <div class="card-header bg-{{ tool.color }} text-white">
                <div class="d-flex justify-content-between align-items-center">
                    <h5 class="mb-0">
                        <i class="{{ tool.icon }}"></i>
                        {{ tool.name }}
                    </h5>
                    {% if tool.status == 'active' %}
                    <span class="badge bg-light text-{{ tool.color }}">
                        <i class="bi bi-check-circle"></i> Active
                    </span>
                    {% else %}
                    <span class="badge bg-secondary">
                        <i class="bi bi-pause-circle"></i> Coming Soon
                    </span>
                    {% endif %}
                </div>
            </div>

            <!-- Card Body with Description (T051) -->
            <div class="card-body d-flex flex-column">
                <p class="card-text flex-grow-1">
                    {{ tool.description }}
                </p>

                <!-- Tool-specific info badges -->
                <div class="mb-3">
                    {% if tool.id == 'geolocation' %}
                    <small class="text-muted">
                        <i class="bi bi-file-image"></i> JPEG, PNG |
                        <i class="bi bi-map"></i> Interactive Maps
                    </small>
                    {% elif tool.id == 'summary-revision' %}
                    <small class="text-muted">
                        <i class="bi bi-robot"></i> GPT-4 Powered |
                        <i class="bi bi-lightning"></i> Real-time
                    </small>
                    {% elif tool.id == 'dr-tracker' %}
                    <small class="text-muted">
                        <i class="bi bi-filetype-csv"></i> CSV, JSON, XLSX |
                        <i class="bi bi-clock"></i> 2-min timeout
                    </small>
                    {% elif tool.id == 'chatbot' %}
                    <small class="text-muted">
                        <i class="bi bi-chat"></i> Natural Language |
                        <i class="bi bi-database"></i> DR Database
                    </small>
                    {% elif tool.id == 'rss-manager' %}
                    <small class="text-muted">
                        <i class="bi bi-newspaper"></i> Feed Management |
                        <i class="bi bi-arrow-repeat"></i> Auto-updates
                    </small>
                    {% endif %}
                </div>

                <!-- Launch Button (T052) -->
                {% if tool.status == 'active' %}
                <a href="{{ tool.url }}" class="btn btn-{{ tool.color }} mt-auto">
                    <i class="bi bi-arrow-right-circle"></i>
                    Launch Tool
                </a>
                {% else %}
                <button class="btn btn-secondary mt-auto" disabled>
                    <i class="bi bi-hourglass"></i>
                    Coming Soon
                </button>
                {% endif %}
            </div>

            <!-- Card Footer with Additional Info (T054) -->
            <div class="card-footer bg-light">
                <small class="text-muted">
                    <i class="bi bi-info-circle"></i>
                    {% if tool.id == 'geolocation' %}
                    Extract GPS data from image EXIF metadata
                    {% elif tool.id == 'summary-revision' %}
                    AI-powered text review and improvement
                    {% elif tool.id == 'dr-tracker' %}
                    Structured report generation from prompts
                    {% elif tool.id == 'chatbot' %}
                    Query DR database with conversational AI
                    {% elif tool.id == 'rss-manager' %}
                    Centralized RSS feed subscription management
                    {% endif %}
                </small>
            </div>
        </div>
    </div>
    {% endfor %}
</div>

<!-- Quick Start Guide (T055) -->
<div class="row mt-5">
    <div class="col-12">
        <div class="card border-info">
            <div class="card-header bg-info text-white">
                <h5 class="mb-0">
                    <i class="bi bi-lightbulb"></i>
                    Quick Start Guide
                </h5>
            </div>
            <div class="card-body">
                <div class="row">
                    <div class="col-md-6">
                        <h6 class="fw-bold">
                            <i class="bi bi-1-circle text-primary"></i>
                            Select a Tool
                        </h6>
                        <p class="text-muted">
                            Click "Launch Tool" on any active tool card above to begin.
                            Each tool opens in the same interface for consistent experience.
                        </p>
                    </div>
                    <div class="col-md-6">
                        <h6 class="fw-bold">
                            <i class="bi bi-2-circle text-success"></i>
                            Upload or Input
                        </h6>
                        <p class="text-muted">
                            Provide the required input (files, text, or queries) based on
                            the tool's specifications. All tools support drag-and-drop.
                        </p>
                    </div>
                    <div class="col-md-6">
                        <h6 class="fw-bold">
                            <i class="bi bi-3-circle text-warning"></i>
                            Process & Review
                        </h6>
                        <p class="text-muted">
                            The system will process your request. Most operations complete
                            within seconds. AI tools may take up to 2 minutes.
                        </p>
                    </div>
                    <div class="col-md-6">
                        <h6 class="fw-bold">
                            <i class="bi bi-4-circle text-info"></i>
                            Download Results
                        </h6>
                        <p class="text-muted">
                            View results on-screen or download in your preferred format.
                            Unsaved work is automatically preserved if your session expires.
                        </p>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- System Info (T056) -->
<div class="row mt-4">
    <div class="col-12">
        <div class="card bg-light">
            <div class="card-body">
                <div class="row text-center">
                    <div class="col-md-3">
                        <i class="bi bi-shield-check text-success fs-3"></i>
                        <h6 class="mt-2 mb-0">Secure</h6>
                        <small class="text-muted">Session-based auth</small>
                    </div>
                    <div class="col-md-3">
                        <i class="bi bi-clock-history text-primary fs-3"></i>
                        <h6 class="mt-2 mb-0">Auto-Save</h6>
                        <small class="text-muted">Work preserved</small>
                    </div>
                    <div class="col-md-3">
                        <i class="bi bi-speedometer text-warning fs-3"></i>
                        <h6 class="mt-2 mb-0">Fast</h6>
                        <small class="text-muted">Optimized processing</small>
                    </div>
                    <div class="col-md-3">
                        <i class="bi bi-patch-check text-info fs-3"></i>
                        <h6 class="mt-2 mb-0">Reliable</h6>
                        <small class="text-muted">Error handling</small>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- Session Info (T057) -->
<div class="row mt-3">
    <div class="col-12 text-center">
        <p class="text-muted mb-0">
            <small>
                <i class="bi bi-info-circle"></i>
                Your session will expire after 4 hours of activity or 30 minutes of inactivity.
                Any unsaved work will be automatically preserved in your browser for recovery after re-login.
            </small>
        </p>
    </div>
</div>

{% endblock %}
